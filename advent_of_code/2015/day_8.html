<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Day 8 - Rust Programs</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust Programs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="day-8-matchsticks"><a class="header" href="#day-8-matchsticks">Day 8: Matchsticks</a></h1>
<p><a href="https://adventofcode.com/2015/day/8">link to problem</a></p>
<h2 id="the-problem"><a class="header" href="#the-problem">The Problem</a></h2>
<p>Space on the sleigh is limited this year, and so Santa will be bringing his list as a digital copy. He needs to know how much space it will take up when stored.</p>
<p>It is common in many programming languages to provide a way to escape special characters in strings. For example, C, JavaScript, Perl, Python, and even PHP handle special characters in very similar ways.</p>
<p>However, it is important to realize the difference between the number of characters in the code representation of the string literal and the number of characters in the in-memory string itself.</p>
<p>For example:</p>
<blockquote>
<p>"" is 2 characters of code (the two double quotes), but the string contains zero characters.</p>
</blockquote>
<blockquote>
<p>"abc" is 5 characters of code, but 3 characters in the string data.</p>
</blockquote>
<blockquote>
<p>"aaa"aaa" is 10 characters of code, but the string itself contains six "a" characters and a single, escaped quote character, for a total of 7 characters in the string data.</p>
</blockquote>
<blockquote>
<p>"\x27" is 6 characters of code, but the string itself contains just one - an apostrophe ('), escaped using hexadecimal notation.</p>
</blockquote>
<p>Santa's list is a file that contains many double-quoted string literals, one on each line. The only escape sequences used are \ (which represents a single backslash), " (which represents a lone double-quote character), and \x plus two hexadecimal characters (which represents a single character with that ASCII code).</p>
<p>Disregarding the whitespace in the file, what is the number of characters of code for string literals minus the number of characters in memory for the values of the strings in total for the entire file?</p>
<p>For example, given the four strings above, the total number of characters of string code (2 + 5 + 10 + 6 = 23) minus the total number of characters in memory for string values (0 + 3 + 7 + 1 = 11) is 23 - 11 = 12.</p>
<h3 id="thoughts"><a class="header" href="#thoughts">Thoughts</a></h3>
<p>I am not sure of quick way of solving this that is not brute force pattern matching.</p>
<p>The cases seem to be:</p>
<ul>
<li>
<p>String with characters</p>
<ul>
<li>Char count + 2</li>
</ul>
</li>
<li>
<p>String with characters and esc</p>
<ul>
<li>Char count + 2 + 1 for each escaped character</li>
</ul>
</li>
<li>
<p>Hex String</p>
<ul>
<li>???</li>
<li>I am not sure if each Hex is 6 characters and I am not sure if <code>chars</code> will the Hex in pieces or the string presentations...</li>
</ul>
<p>Come to think about it, the escape char list may pose a problem. <code>""</code> is fine, but <code>\\</code> in a string could prove troublesome because it overlaps with Hex. So, for "\x27", is the string 2 chars (<code>\'</code>) or 7/8 chars?</p>
<p>Meh. I guess I will find out.</p>
<h4 id="thoughts-post-some-investigation"><a class="header" href="#thoughts-post-some-investigation">Thoughts post some investigation</a></h4>
<p>I think I was wrong about this problem. All the input will come in as strings and I need to deduce which parts of it count as part of the string.</p>
<p>For example, if "/x27" comes in, I need to be able to identify that is ti a hex value. Hex values are seemingly single chars, so should have a string count of 1 and a character count of 6.</p>
<p>For the escape characters, I need to figure out what counts as a escaped character. So, "/'", "/"" and "//" all count.</p>
<p>So, if the string is not a Hex, then I can do a 2 character check to see if the string has escaped characters.</p>
<p>Also, all of the inputs are in quotes, so calling "data.len()" when data is <code>""</code> will give me 2.
This means that I am litary scanning the string trying to decide what the string number should be for all of these. lol</p>
<p>Notes:</p>
<ul>
<li>all strings should be of length 2 or greater.</li>
<li>If hex, then the string count is 1</li>
<li>If not hex, minus 1 for every <code>/</code> in string?</li>
</ul>
<p>I don't know if this is right, but I can write it up and test it against the test case.</p>
<h4 id="mistakes"><a class="header" href="#mistakes">Mistakes</a></h4>
<ol>
<li>
<p>I miss interpreted the problem. The hex code can be found within the string at any point in time. For example, <code>"\x5em\"squulpy"</code> starts with a hex and then there is the rest of the string. So (I think) <code>\x5e</code> should count as 1 string char, but this could have been <code>"y\x5em\"squulp"</code>.</p>
</li>
<li>
<p>Over counting. In my first implementation, I did not consider the case <code>\\\x5e</code>, which is <code>\\</code> + <code>\x5e</code>. So the mistake I made was iterating over the it character by character, when really I needed to skip ahead to account for escaped characters that I have already counted.</p>
</li>
</ol>
</li>
</ul>
<h3 id="solution"><a class="header" href="#solution">Solution</a></h3>
<pre><pre class="playground"><code class="language-rust">use std::io;

fn main() {
  let mut total_chars = 0;
  let mut total_strings = 0;

  for line in io::stdin().lines() {
      let data = line.unwrap();
      let char_count = data.len();
      let mut escaped_count = 0;

      let characters: Vec&lt;char&gt; = data.chars().collect();

      let mut index = 2;
      while index &lt; characters.len() - 1 {
          let prev = index - 1;

          let pair = format!("{}{}", characters[prev], characters[index]);
          if pair.eq("\\\"") || pair.eq("\\\\") {
              escaped_count += 1;
              index += 1 // skip over 1 to prevent double counting
          } else if pair.eq("\\x") {
              escaped_count += 3; // for hex
              index += 3 // skip over 3 to prevent double counting
          }

          index += 1
      }
      let string_count = char_count - escaped_count - 2;
      println!("{data} - Char count: {char_count} - Escaped count: {escaped_count} - Diff (char - eascped - 2 = string count) {string_count}");
      total_chars += char_count;
      total_strings += string_count;
  }
  println!(
      "Chars: {total_chars}, Strings: {total_strings}, Diff: {}",
      total_chars - total_strings
  );
}</code></pre></pre>
<p>The code it pretty ugly. That aside, the print statements gave me a ton of audit information. Without that, I definitely would not have solve this one tonight.</p>
<p>Anyway, the trick to solving this problem is understanding the window you are looking at. I choose the window of two characters, the current one and the previous one. I took the approach of counting the escaped characters and adding 2 to the for the quotes (Note: When I iterate over the Vec<char>, i shrunk the bounds to leave out the start and end quotes).</p>
<p>For the while loop, lets examine <code>aa\\\x5em</code>:</p>
<blockquote>
<p>My first pair is <code>aa</code>. Nothing happens here, so we increment the index by one.</p>
</blockquote>
<blockquote>
<p>Next is <code>a\</code>. Nothing again. Increment by 1.</p>
</blockquote>
<blockquote>
<p>Next is <code>\\</code>. We have an escaped backslash. Increment by two to prevent double counting.</p>
</blockquote>
<blockquote>
<p>Next is <code>\x</code>. We have the start of a hex code. These are exactly 4 characters, so we increment by 4.</p>
</blockquote>
<p>The index is not out of bound, so we stop the count. It should be noted that the <code>m</code> was never looked at, but you need at least 2 characters for an escape, so not looking at it is fine.</p>
<p>Here is example output that shows why I found the print statements so helpful (It was kind of hard to read it as a code block, so I quoted each line of the output).</p>
<blockquote>
<p>"" - Char count: 2 - Escaped count: 0 - Diff (char - eascped - 2 = string count) 0</p>
</blockquote>
<blockquote>
<p>"abc" - Char count: 5 - Escaped count: 0 - Diff (char - eascped - 2 = string count) 3</p>
</blockquote>
<blockquote>
<p>"aaa"aaa" - Char count: 10 - Escaped count: 1 - Diff (char - eascped - 2 = string count) 7</p>
</blockquote>
<blockquote>
<p>"\x27" - Char count: 6 - Escaped count: 3 - Diff (char - eascped - 2 = string count) 1</p>
</blockquote>
<blockquote>
<p>"\\x5em"squulpy" - Char count: 18 - Escaped count: 5 - Diff (char - eascped - 2 = string count) 11</p>
</blockquote>
<blockquote>
<p>Chars: 41, Strings: 22, Diff: 19</p>
</blockquote>
<h2 id="the-problem-part-2"><a class="header" href="#the-problem-part-2">The Problem Part 2</a></h2>
<p>--- Part Two ---</p>
<p>Now, let's go the other way. In addition to finding the number of characters of code, you should now encode each code representation as a new string and find the number of characters of the new encoded representation, including the surrounding double quotes.</p>
<p>For example:</p>
<blockquote>
<p>"" encodes to """", an increase from 2 characters to 6.
"abc" encodes to ""abc"", an increase from 5 characters to 9.
"aaa"aaa" encodes to ""aaa\"aaa"", an increase from 10 characters to 16.
"\x27" encodes to ""\x27"", an increase from 6 characters to 11.</p>
</blockquote>
<p>Your task is to find the total number of characters to represent the newly encoded strings minus the number of characters of code in each original string literal. For example, for the strings above, the total encoded length (6 + 9 + 16 + 11 = 42) minus the characters in the original code representation (23, just like in the first part of this puzzle) is 42 - 23 = 19.</p>
<h3 id="thoughts-1"><a class="header" href="#thoughts-1">Thoughts</a></h3>
<p>It is 2 am, I'm tired, and I should go to bed, but this looks simplier that part 1.</p>
<blockquote>
<p>Each line gets a plus 2 because we have new quotes.</p>
</blockquote>
<p>I iterate over each char and add 1 everytime I see a <code>"</code> of a <code>\</code>. This accounts for the new escapes. To get the new size, we <code>characters.len() + new_escapes + 2 (for the new quotes)</code>.</p>
<blockquote>
<p>"" =&gt; characters.len() + new_escapes + new_qoutes = 2 + 2 + 2 = 6</p>
</blockquote>
<blockquote>
<p>"abc" =&gt; 5 + 2 + 2 = 9</p>
</blockquote>
<blockquote>
<p>"aaa"aaa" =&gt; 10 + 4 + 2 = 16</p>
</blockquote>
<blockquote>
<p>"\x27" =&gt; 6 + 3 + 2 = 11</p>
</blockquote>
<h3 id="solution-part-2"><a class="header" href="#solution-part-2">Solution Part 2</a></h3>
<pre><pre class="playground"><code class="language-rust">use std::io;

fn main() {
  let mut total_chars = 0;
  let mut total_expanded = 0;

  for line in io::stdin().lines() {
      let data = line.unwrap();

      let mut expanded_count = 0;
      for character in data.chars() {
          match character {
              '\\' =&gt; expanded_count += 1,
              '"' =&gt; expanded_count += 1,
              _ =&gt; {}
          }
      }

      let expanded_count = data.len() + expanded_count + 2;
      println!(
          "line: {data} -- chars: {} -- expanded: {expanded_count}",
          data.len()
      );
      total_expanded += expanded_count;
      total_chars += data.len();
  }

  println!(
      "{total_expanded} - {total_chars} = {}",
      total_expanded - total_chars
  );
}</code></pre></pre>
<p>This was definitely much easier than part 1.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../advent_of_code/2015/day_7.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../advent_of_code/2015/day_7.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
