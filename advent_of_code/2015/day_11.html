<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Day 11 - Rust Programs</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust Programs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="day-11-corporate-policy"><a class="header" href="#day-11-corporate-policy">Day 11: Corporate Policy</a></h1>
<p><a href="https://adventofcode.com/2015/day/11">link to problem</a></p>
<h2 id="the-problem"><a class="header" href="#the-problem">The Problem</a></h2>
<p>Santa's previous password expired, and he needs help choosing a new one.</p>
<p>To help him remember his new password after the old one expires, Santa has devised a method of coming up with a password based on the previous one. Corporate policy dictates that passwords must be exactly eight lowercase letters (for security reasons), so he finds his new password by incrementing his old password string repeatedly until it is valid.</p>
<p>Incrementing is just like counting with numbers: xx, xy, xz, ya, yb, and so on. Increase the rightmost letter one step; if it was z, it wraps around to a, and repeat with the next letter to the left until one doesn't wrap around.</p>
<p>Unfortunately for Santa, a new Security-Elf recently started, and he has imposed some additional password requirements:</p>
<blockquote>
<p>Passwords must include one increasing straight of at least three letters, like abc, bcd, cde, and so on, up to xyz. They cannot skip letters; abd doesn't count.</p>
</blockquote>
<blockquote>
<p>Passwords may not contain the letters i, o, or l, as these letters can be mistaken for other characters and are therefore confusing.</p>
</blockquote>
<blockquote>
<p>Passwords must contain at least two different, non-overlapping pairs of letters, like aa, bb, or zz.</p>
</blockquote>
<p>For example:</p>
<blockquote>
<p>hijklmmn meets the first requirement (because it contains the straight hij) but fails the second requirement requirement (because it contains i and l).</p>
</blockquote>
<blockquote>
<p>abbceffg meets the third requirement (because it repeats bb and ff) but fails the first requirement.</p>
</blockquote>
<blockquote>
<p>abbcegjk fails the third requirement, because it only has one double letter (bb).</p>
</blockquote>
<blockquote>
<p>The next password after abcdefgh is abcdffaa.</p>
</blockquote>
<blockquote>
<p>The next password after ghijklmn is ghjaabcc, because you eventually skip all the passwords that start with ghi..., since i is not allowed.</p>
</blockquote>
<p>Given Santa's current password (your puzzle input), what should his next password be?</p>
<p>Your puzzle input is <code>hxbxwxba</code>.</p>
<h3 id="thoughts"><a class="header" href="#thoughts">Thoughts</a></h3>
<p>The password being a fixed size great help. 8 characters is small enough that I can create a function for each one of these checks and not care how long it will take to process.</p>
<p>For no reason in particular, I am thinking about fancy stuff like a validate function that takes a list of functions and a string as input. The string will then get tested against all the functions in the list and if any of the function return false, it will return false.</p>
<p>The reason I can do this is because all the validation checks have the same function signature, which is that they take in a string reference and return a boolean.</p>
<p>The harder part of this question might be the incrementing of strings. I'm silly. I have been sitting here struggling to think of ways to interate over the charaters while skipping i, o, and l, like that is actually a requirement. I will use the numbers 0 - 25 and i will convert them back and forth between characters as needed. I'm thinking a struct that holds an internal list of numbers. It has an increment method that cycles up and another method that returns the string representation of the array so that I can pass it to the validate function.</p>
<p>I could take time to think about the other parts of the problem, but I'm pretty tired. So lets write this up and go to bed.</p>
<h3 id="solution"><a class="header" href="#solution">Solution</a></h3>
<p>This took a lot longer to write than I thought it would and, with regard to speed of the code, this is, by far, the slowest thing I have written so far.</p>
<pre><pre class="playground"><code class="language-rust">use std::collections::HashMap;
use std::io;

struct Password {
    internal: Vec&lt;usize&gt;,
    number_map: HashMap&lt;usize, String&gt;,
    letter_map: HashMap&lt;String, usize&gt;,
}

impl Password {
    fn new(
        data: &amp;str,
        number_map: HashMap&lt;usize, String&gt;,
        letter_map: HashMap&lt;String, usize&gt;,
    ) -&gt; Self {
        let internal: Vec&lt;usize&gt; = data
            .chars()
            .map(|x| x.to_string())
            .map(|y| letter_map.get(&amp;y).unwrap().clone())
            .collect();
        Self {
            internal,
            number_map,
            letter_map,
        }
    }

    fn to_string(&amp;self) -&gt; String {
        self.internal
            .iter()
            .map(|x| self.number_map.get(x).unwrap())
            .map(|y| y.clone())
            .collect()
    }

    fn increment(&amp;mut self) {
        let mut index = self.internal.len() - 1;

        loop {
            match self.internal[index] {
                25 =&gt; {
                    self.internal[index] = 0;
                    if index == 0 {
                        break;
                    } else {
                        index -= 1;
                    }
                }
                _ =&gt; {
                    self.internal[index] += 1;
                    break;
                }
            }
        }
    }
}

fn validate(funcs: Vec&lt;fn(&amp;str) -&gt; bool&gt;, input: String) -&gt; bool {
    let mut result = true;

    for func in funcs.iter() {
        match func(&amp;input) {
            false =&gt; {
                result = false;
                break;
            }
            true =&gt; {}
        }
    }
    result
}

fn contains_unwanted_letters(data: &amp;str) -&gt; bool {
    let mut result = true;

    for letter in data.chars() {
        match letter {
            'o' | 'i' | 'l' =&gt; {
                result = false;
                break;
            }
            _ =&gt; {}
        }
    }
    result
}

fn contains_two_pairs(data: &amp;str) -&gt; bool {
    let mut pairs = Vec::new();

    let list: Vec&lt;char&gt; = data.chars().collect();

    let mut index = 1;
    while index &lt; list.len() {
        let prev_char = list[index - 1];
        let curr_char = list[index];

        match prev_char.eq(&amp;curr_char) {
            true =&gt; {
                if !pairs.contains(&amp;format!("{prev_char}{curr_char}")) {
                    pairs.push(format!("{prev_char}{curr_char}"));
                    index += 1;
                }
            }
            false =&gt; {}
        }

        index += 1;
    }

    pairs.len() &gt;= 2
}

fn contains_seq_letters(data: &amp;str) -&gt; bool {
    let letter_map: HashMap&lt;String, usize&gt; = "abcdefghijklmnopqrstuvwxyz"
        .chars()
        .map(|x| x.to_string())
        .enumerate()
        .map(|(num, letter)| (letter, num))
        .collect();

    let mut result = false;

    let list: Vec&lt;String&gt; = data.chars().map(|x| x.to_string()).collect();
    let mut index = 2;

    while index &lt; list.len() {
        let num_1 = letter_map.get(&amp;list[index - 2]).unwrap();
        let num_2 = letter_map.get(&amp;list[index - 1]).unwrap();
        let num_3 = letter_map.get(&amp;list[index]).unwrap();

        //println!("{}, {}, {}", num_1, num_2, num_3);

        if num_1 + 1 == *num_2 &amp;&amp; num_2 + 1 == *num_3 {
            result = true;
            break;
        }
        index += 1;
    }
    //println!("seq: {result}");
    result
}

fn main() {
    let mut letter_to_number = HashMap::new();
    let mut number_to_letter = HashMap::new();

    for (index, letter) in "abcdefghijklmnopqrstuvwxyz".chars().enumerate() {
        letter_to_number.insert(index.clone(), letter.to_string());
        number_to_letter.insert(letter.to_string(), index);
    }

    for line in io::stdin().lines() {
        let data = line.unwrap();

        let mut password = Password::new(
            &amp;data.to_string(),
            letter_to_number.clone(),
            number_to_letter.clone(),
        );

        let mut result = password.to_string();
        let checks = vec![
            contains_seq_letters,
            contains_unwanted_letters,
            contains_two_pairs,
        ];

        while !validate(checks.clone(), result.clone()) {
            password.increment();
            result = password.to_string();
            //println!("{result}");
        }

        println!("{result}");
    }
}</code></pre></pre>
<p>I did everything I said I was going to do. I created a struct called Password that has a increment method and a to_string method. Internally, it manipulates and Vec of numbbers, which makes the implementation for the increment method manageable.</p>
<p>I have a validate function that takes a list of functions with the signature of <code>fn (&amp;str) -&gt; bool</code> and it also has a parameter called input which is a String. The validate function iterates over the functions in the list, it passes a reference to <code>input</code> to those functions and makes sure they all return true.</p>
<p>I then wrote out each of the requirements as functions.</p>
<p>Architectually, I really like this code because everything is broken down into small components. Maintaining this code would a breeze. That said, the reason the code is slow to solve the problem is because I separated everything out.</p>
<blockquote>
<p>The next password after ghijklmn is ghjaabcc, because you eventually skip all the passwords that start with ghi..., since i is not allowed.</p>
</blockquote>
<p>My code increments that password one unit at a time, which means that I have to go through every <code>ghi....</code> combination before getting to the correct answer. For this test input, the code took so long to complete that I was positive that I had an infinite loop somewhere. It wasn't until I killed the program and added print statements that realized that the program is fine, its just slow. That said, it was really cool to see the password increment up super fast.</p>
<h2 id="the-problem-part-2"><a class="header" href="#the-problem-part-2">The Problem Part 2</a></h2>
<p>After I found the password in part 1, they wanted me to find the next password. So the code stays the same, but I did manually increment part 1's password by one to that it would be invalid. Otherwise the code returns the input because the input is a valid password.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../advent_of_code/2015/day_10.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../advent_of_code/2015/day_10.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
